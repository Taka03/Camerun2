//*============================================================================
//SoundEffect.cpp
//*============================================================================

//=============================================================================
//include
//=============================================================================
#include "SoundEffect.h"

//=============================================================================
//コンストラクタ
//=============================================================================
//[input]
//	pName:データ名
//=============================================================================
CSoundEffect::CSoundEffect( const char *pName ) 
:m_pSE(NULL), 
 CSoundObject( pName )
{

}


//=============================================================================
//デストラクタ
//=============================================================================
CSoundEffect::~CSoundEffect(void)
{
	SAFE_RELEASE( m_pSE );
}

//=============================================================================
//サウンドの読み込み
//=============================================================================
//[input]
//	pCore:コアデバイス
//	pFileMgr:ファイルマネージャ
//=============================================================================
void CSoundEffect::LoadSound( ICore *pCore, File::IFileManager *pFileMgr )
{
	pFileMgr->SetCurrentPath("SE");
	
	printf("LOAD SE[%s]", m_strFileName.c_str() );
	
	m_pSE = pCore->CreateSoundFromFile( m_strFileName.c_str(), 1, false ); 
	
	printf( "                 : -> %s\n", m_pSE->IsInvalid() ? "Failed" : "Succeeded" );
	
}

//=============================================================================
//処理
//=============================================================================
void CSoundEffect::Exec()
{
	if( !m_pSE->IsPlay(0) )
	{
		m_pSE->Play(0);
	}
}



